<!DOCTYPE html>
<html lang="en">

    <head th:replace="fragments/head :: head"></head>

    <body>

        <header th:replace="fragments/header :: header"></header>

        <div class="container-fluid">
            <div class="row">
                <div class="col bg-secondary bg-opacity-10 px-5 py-4">
                    <h1>Administración de Libros</h1>
                    <p>Utilice este módulo para administrar la base de datos de libros.</p>
                    <hr>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row mt-4">
                <div class="col px-4">
                    <form th:action="@{/books/__${action}__}" th:object="${book}" method="POST" autocompleted="off" class="needs-validation" novalidate>

                        <input type="hidden" th:field="*{id}">

                        <div class="mb-3">
                            <label for="isbn" class="form-label">ISBN</label>
                            <input type="text" class="form-control" th:field="*{isbn}" id="isbn" placeholder="ISBN" required autofocus>
                            <div class="invalid-feedback">El ISBN del libro es un campo requerido!</div>
                        </div>

                        <div class="mb-3">
                            <label for="title" class="form-label">Título</label>
                            <input type="text" class="form-control" th:field="*{title}" id="title" placeholder="Título" required>
                            <div class="invalid-feedback">El título del libro es un campo requerido!</div>
                        </div>

                        <div class= " mb-3">
                            <label for="year" class="form-label">Año de Publicación</label>
                            <input type="number" class="form-control" th:field="*{year}" id="year" placeholder="Año" required>
                            <div class="invalid-feedback">El año de publicación del libro es un campo requerido!</div>
                        </div>

                        <div class=" mb-3">
                            <label for="copies" class="form-label">Cantidad de Ejemplares</label>
                            <input type="number" class="form-control" th:field="*{copies}" id="copies" placeholder="Cantidad de Ejemplares" required>
                            <div class="invalid-feedback">L cantidad de ejemplares del libro es un campo requerido!</div>
                        </div>

                        <div class=" mb-3">
                            <label for="borrowedCopies" class="form-label">Cantidad de Ejemplares Prestados</label>
                            <input type="number" class="form-control" th:field="*{borrowedCopies}" id="borrowedCopies" placeholder="Cantidad de Ejemplares Prestados" required>
                            <div class="invalid-feedback">La cantidad de ejemplares prestados del libro es un campo requerido!</div>
                        </div>

                        <div class="mb-3">
                            <label for="author" class="form-label">Autor</label>
                            <select class="form-select form-control" th:field="*{author}" id="author" aria-label="Select author" required>
                                <option th:each="author :${authors}" th:value="${author.id}" th:text="|${author.name} ${author.surname}|"></option>
                            </select>
                            <div class="invalid-feedback">El autor del libro es un campo requerido!</div>
                        </div>

                        <div class="mb-3">
                            <label for="editorial" class="form-label">Editorial</label>
                            <select class="form-select form-control" th:field="*{editorial}" id="editorial" aria-label="Select editorial" required>
                                <option th:each="editorial :${editorials}" th:value="${editorial.id}" th:text="${editorial.name}"></option>
                            </select>
                            <div class="invalid-feedback">La editorial del libro es un campo requerido!</div>
                        </div>

                        <div class="d-flex flex-row justify-content-end">
                            <button type="submit" class="btn btn-danger mx-3">Volver</button>
                            <button type="submit" class="btn btn-primary" th:text="${action == 'create' ? 'Guardar' : 'Editar'}"></button>
                        </div>

                    </form>
                </div>
            </div>
        </div>


        <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js}" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script th:src="@{/validation.js}"></script>
    </body>
</html>

